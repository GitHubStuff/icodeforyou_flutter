# pubspec.yaml icodeforyou_flutter
name: icodeforyou_flutter
publish_to: none
description: Collection of flutter packages

workspace:
  - packages/abstractions
  - packages/analog_clock_widget
  - packages/extensions
  - packages/widgetbook_workspace

environment:
  sdk: ^3.8.1

dev_dependencies:
  melos: ^7.0.0-dev.9

# Add this to your main workspace pubspec.yaml melos scripts section

melos:
  scripts:
    # Existing scripts...
    analyze:
      run: dart analyze .
    
    # Build runner specifically for widgetbook
    widgetbook_build:
      description: Build widgetbook components
      run: |
        cd packages/widgetbook_workspace
        dart run build_runner build --delete-conflicting-outputs
        echo "âœ… Widgetbook build completed"
    
    # Watch mode for widgetbook development
    widgetbook_watch:
      description: Watch and rebuild widgetbook components
      run: |
        cd packages/widgetbook_workspace
        echo "ðŸ‘€ Starting widgetbook watch mode (Press Ctrl+C to stop)"
        dart run build_runner watch --delete-conflicting-outputs
    
    # Clean widgetbook generated files
    widgetbook_clean:
      description: Clean widgetbook generated files
      run: |
        cd packages/widgetbook_workspace
        dart run build_runner clean
        echo "ðŸ§¹ Widgetbook generated files cleaned"
    
    # Run widgetbook
    widgetbook:
      description: Run widgetbook for development
      run: |
        cd packages/widgetbook_workspace
        flutter run -d chrome
    
    # Build all packages that have build_runner
    build:
      description: Run build_runner in packages that need it
      exec: dart run build_runner build --delete-conflicting-outputs
      packageFilters:
        dependsOn: "build_runner"
    
    # Watch all packages that have build_runner
    build_watch:
      description: Run build_runner in watch mode for packages that need it
      exec: dart run build_runner watch --delete-conflicting-outputs
      packageFilters:
        dependsOn: "build_runner"

flutter:
  uses-material-design: true